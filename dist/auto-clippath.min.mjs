/* 
auto-clippath v1.0.1 
The TypeScript-based library for clip-path generation
https://github.com/rjct/auto-clippath
Copyright (c) 2023-present, Eugene Shordukalo <info@reject.in.ua>   
*/
async function x(t,a,r){let{width:n,height:o}=a,e=r&&"shift"in r&&r.shift!==void 0?r.shift:{x:0,y:0},i=r&&"gap"in r&&r.gap!==void 0?r.gap:0,d=r&&"distance"in r&&r.distance!==void 0?r.distance:1/0,c=performance.now(),s=new OffscreenCanvas(n,o).getContext("2d");try{return s.drawImage(t,-e.x,-e.y,n,o,0,0,n,o),new Promise(h=>{h({clipPath:w(s.getImageData(0,0,n,o),i,d),time:performance.now()-c})})}catch(h){throw new Error(h)}}function m(t){if(t.length<=3)return t;let a=(o,e,i)=>{let d=(e.y-o.y)*(i.x-e.x)-(e.x-o.x)*(i.y-e.y);return d===0?0:d>0?1:2},r=(o,e)=>{let i=a(t[0],o,e);return i===0?Math.hypot(o.x-t[0].x,o.y-t[0].y)-Math.hypot(e.x-t[0].x,e.y-t[0].y):i===2?-1:1};t.sort(r);let n=[];n.push(t[0]);for(let o=2;o<t.length;o++){let e=n.length-1;for(;e>=1&&a(n[e-1],n[e],t[o])!==2;)n.pop(),e=n.length-1;n.push(t[o])}return n}function g(t,a,r){return(a.x-t.x)*(r.y-t.y)-(a.y-t.y)*(r.x-t.x)}function P(t,a){return Math.sqrt((a.x-t.x)**2+(a.y-t.y)**2)}function b(t,a,r){let n=[];function o(e){(n.length===0||P(e,n[n.length-1])>r)&&n.push({x:Math.round(e.x),y:Math.round(e.y)})}for(let e=0;e<t.length;e++){let i=t[e],d=t[(e+1)%t.length],c=d.x-i.x,u=d.y-i.y,s=Math.sqrt(c*c+u*u),h=c/s,f=u/s,y={x:i.x+f*a,y:i.y-h*a},C={x:d.x+f*a,y:d.y-h*a};o(y);let l=n.length;for(;l>=2&&g(n[l-2],n[l-1],C)<=0;)n.pop(),l--;e!==t.length-1&&o(C)}return n}function w(t,a,r){let{width:n,height:o,data:e}=t,i=(u,s)=>e[(s*n+u)*4+3]>1,d=[];for(let u=0;u<o;u++)for(let s=0;s<n;s++)i(s,u)&&d.push({x:s,y:u});let c=m(d);return b(c,a,r)}window.autoClipPath=window.autoClipPath||x;
//# sourceMappingURL=auto-clippath.min.mjs.map
